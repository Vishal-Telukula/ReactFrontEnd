{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\teluk\\\\Music\\\\3-2\\\\FEWD\\\\Project\\\\re-cinema-movie-main\\\\src\\\\components\\\\Lists.jsx\",\n  _s = $RefreshSig$();\n/*\nPage: Lists\nThis page fetches and manages the resulting value in an object.\nCreated by Sunil Park\n*/\n\nimport React, { useState, useEffect } from \"react\";\nimport { StyledSectionSearch, StyledPreventAutoFit, StyledSearchDescription, StyledSearchDescriptionText, StyledContinueBox, StyledContinueBtn, StyledQuryValue, StyledRecommended } from \"./styles/Page.styled\";\nimport APIUtils from \"../api/APIUtils\";\nimport MovieList from \"./MovieList\";\nimport RecommendedMovie from \"./RecommendedMovie\";\nimport Tip from \"./Tip\";\nimport Loading from \"./Loading\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Lists = _ref => {\n  _s();\n  let {\n    pageParent,\n    parameter,\n    query,\n    path,\n    viewBy,\n    setSelectedMovieID\n  } = _ref;\n  // fetch and get the result value.\n  const {\n    datas,\n    isLoading,\n    requestMovie\n  } = APIUtils();\n\n  // All data result values are stored in this element.\n  const [obj, setObj] = useState({});\n\n  // When a query to be fetched is obtained, initial values of objects are created in advance to prevent various errors.\n  useEffect(() => {\n    if (query !== undefined) {\n      if (!obj.hasOwnProperty(query)) {\n        setObj({\n          ...obj,\n          [query]: {\n            data: [],\n            page: 1,\n            total: 0,\n            continue: true\n          }\n        });\n      }\n    }\n  }, [query]);\n\n  // If the fetch is successful, the data value is saved into the object.\n  useEffect(() => {\n    if (datas !== undefined && query !== undefined) {\n      setObj({\n        ...obj,\n        [query]: {\n          ...obj[query],\n          data: [...obj[query].data, datas.results],\n          total: datas.total_results,\n          continue: datas.total_pages > obj[query].page ? true : false\n        }\n      });\n    }\n  }, [datas]);\n  const nextPageClickHandler = () => {\n    setObj({\n      ...obj,\n      [query]: {\n        ...obj[query],\n        page: obj[query].page + 1\n      }\n    });\n  };\n\n  // Fetching the data when obj has been updated.\n  useEffect(() => {\n    if (obj.hasOwnProperty(query)) {\n      // Preventing the fetch if the data already has in the object.\n      if (obj[query].page !== obj[query].data.length) {\n        fetchItem();\n      }\n    }\n  }, [obj]);\n  function fetchItem() {\n    requestMovie(`${parameter}&page=${obj[query].page}&`, path);\n  }\n  return /*#__PURE__*/_jsxDEV(StyledSectionSearch, {\n    children: obj.hasOwnProperty(query) && (obj[query].data[0] === undefined ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }, this) : obj[query].data[0].length !== 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [pageParent === \"HOME\" ? /*#__PURE__*/_jsxDEV(StyledRecommended, {\n        children: [obj[query].data.length !== 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(RecommendedMovie, {\n            datas: obj[query].data,\n            setSelectedMovieID: id => setSelectedMovieID(id)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this)\n        }, void 0, false), /*#__PURE__*/_jsxDEV(\"span\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }, this) : pageParent === \"SEARCH\" ? /*#__PURE__*/_jsxDEV(StyledQuryValue, {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Your have searched\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: query\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Found \", obj[query].total, \" movies\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 15\n      }, this) : \"\", obj[query].data.map((pageArr, page) => {\n        return pageArr.map((item, idx) => {\n          return /*#__PURE__*/_jsxDEV(MovieList, {\n            datas: item,\n            idx: idx + 1 + page * 20,\n            viewBy: viewBy,\n            setSelectedMovieID: query => setSelectedMovieID(query)\n          }, idx + item.title, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 19\n          }, this);\n        });\n      }), /*#__PURE__*/_jsxDEV(StyledPreventAutoFit, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 13\n      }, this), isLoading ? /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 15\n      }, this) : datas !== undefined && /*#__PURE__*/_jsxDEV(StyledContinueBox, {\n        children: /*#__PURE__*/_jsxDEV(StyledContinueBtn, {\n          className: obj[query].continue ? \"visible\" : \"\",\n          onClick: nextPageClickHandler,\n          children: \"SEE MORE\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true) :\n    /*#__PURE__*/\n    // If the query found 0 data\n    _jsxDEV(StyledSearchDescription, {\n      children: [/*#__PURE__*/_jsxDEV(StyledSearchDescriptionText, {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"No movie data found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 15\n        }, this), pageParent === \"SEARCH\" && /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"You have searched: \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: query\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 38\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Tip, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s(Lists, \"5y98PwLDyC046dYh3iZQDczTbqQ=\");\n_c = Lists;\nexport default Lists;\nvar _c;\n$RefreshReg$(_c, \"Lists\");","map":{"version":3,"names":["React","useState","useEffect","StyledSectionSearch","StyledPreventAutoFit","StyledSearchDescription","StyledSearchDescriptionText","StyledContinueBox","StyledContinueBtn","StyledQuryValue","StyledRecommended","APIUtils","MovieList","RecommendedMovie","Tip","Loading","Lists","pageParent","parameter","query","path","viewBy","setSelectedMovieID","datas","isLoading","requestMovie","obj","setObj","undefined","hasOwnProperty","data","page","total","continue","results","total_results","total_pages","nextPageClickHandler","length","fetchItem","id","map","pageArr","item","idx","title"],"sources":["C:/Users/teluk/Music/3-2/FEWD/Project/re-cinema-movie-main/src/components/Lists.jsx"],"sourcesContent":["/*\nPage: Lists\nThis page fetches and manages the resulting value in an object.\nCreated by Sunil Park\n*/\n\nimport React, { useState, useEffect } from \"react\";\nimport {\n  StyledSectionSearch,\n  StyledPreventAutoFit,\n  StyledSearchDescription,\n  StyledSearchDescriptionText,\n  StyledContinueBox,\n  StyledContinueBtn,\n  StyledQuryValue,\n  StyledRecommended,\n} from \"./styles/Page.styled\";\n\nimport APIUtils from \"../api/APIUtils\";\nimport MovieList from \"./MovieList\";\nimport RecommendedMovie from \"./RecommendedMovie\";\nimport Tip from \"./Tip\";\nimport Loading from \"./Loading\";\n\nconst Lists = ({\n  pageParent,\n  parameter,\n  query,\n  path,\n  viewBy,\n  setSelectedMovieID,\n}) => {\n  // fetch and get the result value.\n  const { datas, isLoading, requestMovie } = APIUtils();\n\n  // All data result values are stored in this element.\n  const [obj, setObj] = useState({});\n\n  // When a query to be fetched is obtained, initial values of objects are created in advance to prevent various errors.\n  useEffect(() => {\n    if (query !== undefined) {\n      if (!obj.hasOwnProperty(query)) {\n        setObj({\n          ...obj,\n          [query]: {\n            data: [],\n            page: 1,\n            total: 0,\n            continue: true,\n          },\n        });\n      }\n    }\n  }, [query]);\n\n  // If the fetch is successful, the data value is saved into the object.\n  useEffect(() => {\n    if (datas !== undefined && query !== undefined) {\n      setObj({\n        ...obj,\n        [query]: {\n          ...obj[query],\n          data: [...obj[query].data, datas.results],\n          total: datas.total_results,\n          continue: datas.total_pages > obj[query].page ? true : false,\n        },\n      });\n    }\n  }, [datas]);\n\n  const nextPageClickHandler = () => {\n    setObj({\n      ...obj,\n      [query]: {\n        ...obj[query],\n        page: obj[query].page + 1,\n      },\n    });\n  };\n\n  // Fetching the data when obj has been updated.\n  useEffect(() => {\n    if (obj.hasOwnProperty(query)) {\n      // Preventing the fetch if the data already has in the object.\n      if (obj[query].page !== obj[query].data.length) {\n        fetchItem();\n      }\n    }\n  }, [obj]);\n\n  function fetchItem() {\n    requestMovie(`${parameter}&page=${obj[query].page}&`, path);\n  }\n\n  return (\n    <StyledSectionSearch>\n      {obj.hasOwnProperty(query) &&\n        (obj[query].data[0] === undefined ? (\n          <Loading />\n        ) : obj[query].data[0].length !== 0 ? (\n          <>\n            {/*\n              Change the header depending on where the component's parent came from.\n            */}\n            {pageParent === \"HOME\" ? (\n              <StyledRecommended>\n                {obj[query].data.length !== 0 && (\n                  <>\n                    <RecommendedMovie\n                      datas={obj[query].data}\n                      setSelectedMovieID={(id) => setSelectedMovieID(id)}\n                    />\n                  </>\n                )}\n                <span />\n              </StyledRecommended>\n            ) : pageParent === \"SEARCH\" ? (\n              <StyledQuryValue>\n                <p>Your have searched</p>\n                <h3>{query}</h3>\n                <p>Found {obj[query].total} movies</p>\n              </StyledQuryValue>\n            ) : (\n              \"\"\n            )}\n\n            {/* \n              All fetched data values are delivered.\n            */}\n            {obj[query].data.map((pageArr, page) => {\n              return pageArr.map((item, idx) => {\n                return (\n                  <MovieList\n                    key={idx + item.title}\n                    datas={item}\n                    idx={idx + 1 + page * 20}\n                    viewBy={viewBy}\n                    setSelectedMovieID={(query) => setSelectedMovieID(query)}\n                  />\n                );\n              });\n            })}\n            <StyledPreventAutoFit />\n\n            {/* Another fetch cannot be called until the fetch is finished loading. */}\n            {isLoading ? (\n              <Loading />\n            ) : (\n              datas !== undefined && (\n                <StyledContinueBox>\n                  <StyledContinueBtn\n                    className={obj[query].continue ? \"visible\" : \"\"}\n                    onClick={nextPageClickHandler}\n                  >\n                    SEE MORE\n                  </StyledContinueBtn>\n                </StyledContinueBox>\n              )\n            )}\n          </>\n        ) : (\n          // If the query found 0 data\n          <StyledSearchDescription>\n            <StyledSearchDescriptionText>\n              <h2>No movie data found</h2>\n              {pageParent === \"SEARCH\" && (\n                <p>\n                  You have searched: <span>{query}</span>\n                </p>\n              )}\n            </StyledSearchDescriptionText>\n            <Tip />\n          </StyledSearchDescription>\n        ))}\n    </StyledSectionSearch>\n  );\n};\n\nexport default Lists;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}